<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ¨ç”»åˆ‡æ¢æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .status {
            background: #f0f8ff;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .success {
            background: #d4edda;
            color: #155724;
        }
        .warning {
            background: #fff3cd;
            color: #856404;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>åŠ¨ç”»åˆ‡æ¢åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>æµ‹è¯•è¯´æ˜</h2>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•å¤šæ ‡è®°åŠ¨ç”»åˆ‡æ¢åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
        
        <div class="status success">
            <strong>âœ… å·²ä¿®å¤çš„é—®é¢˜ï¼š</strong>
            <ul>
                <li>æ·»åŠ äº†åŠ¨ç”»åˆ‡æ¢é€»è¾‘</li>
                <li>æ‰«ææ–°æ ‡è®°æ—¶ä¼šåˆ‡æ¢åˆ°å¯¹åº”çš„åŠ¨ç”»</li>
                <li>é¿å…äº†é‡å¤çš„åŠ è½½é€šçŸ¥</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>æµ‹è¯•æ­¥éª¤</h2>
        <ol>
            <li>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¯åŠ¨ARåº”ç”¨</li>
            <li>æ‰«æç¬¬ä¸€ä¸ªæ ‡è®°ï¼ˆå¦‚Hiroæ ‡è®°ï¼‰</li>
            <li>ç¡®è®¤ç¬¬ä¸€ä¸ªåŠ¨ç”»æ˜¾ç¤º</li>
            <li>ç§»å¼€ç¬¬ä¸€ä¸ªæ ‡è®°</li>
            <li>æ‰«æç¬¬äºŒä¸ªæ ‡è®°ï¼ˆå¦‚Letteræ ‡è®°ï¼‰</li>
            <li>ç¡®è®¤åŠ¨ç”»åˆ‡æ¢åˆ°ç¬¬äºŒä¸ªåŠ¨ç”»</li>
            <li>é‡å¤æµ‹è¯•å…¶ä»–æ ‡è®°ç»„åˆ</li>
        </ol>
        
        <button onclick="window.open('http://localhost:8000', '_blank')">å¯åŠ¨ARåº”ç”¨</button>
        <button onclick="window.open('http://localhost:8000/index.html', '_blank')">ç›´æ¥æ‰“å¼€ä¸»é¡µ</button>
    </div>

    <div class="test-section">
        <h2>æŠ€æœ¯å®ç°ç»†èŠ‚</h2>
        
        <h3>1. åŠ¨ç”»åˆ‡æ¢é€»è¾‘</h3>
        <div class="log">
// ä¿®æ”¹å‰çš„é—®é¢˜ä»£ç 
if (!appState.characterActivated && !appState.activationInProgress) {
  activateLottieCharacter(markerId);
}

// ä¿®æ”¹åçš„è§£å†³æ–¹æ¡ˆ
if (!appState.characterActivated && !appState.activationInProgress) {
  // é¦–æ¬¡æ¿€æ´»åŠ¨ç”»
  activateLottieCharacter(markerId);
} else if (appState.characterActivated && appState.currentMarker !== markerId) {
  // åˆ‡æ¢åˆ°ä¸åŒçš„åŠ¨ç”»
  switchToNewAnimation(markerId);
}
        </div>

        <h3>2. æ–°å¢çš„åˆ‡æ¢å‡½æ•°</h3>
        <div class="log">
function switchToNewAnimation(markerId) {
  if (appState.activationInProgress) return;
  
  console.log(`åˆ‡æ¢åˆ°æ–°åŠ¨ç”»: ${markerId}`);
  appState.activationInProgress = true;
  
  const lottieContainer = document.getElementById('lottie-character');
  
  if (lottieContainer) {
    // æ·»åŠ åˆ‡æ¢åŠ¨ç”»æ•ˆæœ
    lottieContainer.style.animation = 'fadeInScale 0.5s ease-out';
    
    // åŠ è½½å¹¶æ’­æ”¾æ–°çš„LottieåŠ¨ç”»
    loadLottieAnimation(markerId);
    
    appState.currentAnimation = animationConfig[markerId].file;
    appState.activationInProgress = false;
    
    const config = animationConfig[markerId];
    showNotification(`å·²åˆ‡æ¢åˆ°${config.name}ï¼`, 'success');
    updateUI();
  }
}
        </div>

        <h3>3. çŠ¶æ€ç®¡ç†æ”¹è¿›</h3>
        <ul>
            <li><strong>currentMarker</strong>: è·Ÿè¸ªå½“å‰æ¿€æ´»çš„æ ‡è®°ID</li>
            <li><strong>currentAnimation</strong>: è·Ÿè¸ªå½“å‰æ’­æ”¾çš„åŠ¨ç”»æ–‡ä»¶</li>
            <li><strong>activationInProgress</strong>: é˜²æ­¢åŠ¨ç”»åˆ‡æ¢è¿‡ç¨‹ä¸­çš„å†²çª</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>é¢„æœŸè¡Œä¸º</h2>
        <div class="status warning">
            <strong>ğŸ¯ æ­£ç¡®çš„è¡Œä¸ºåº”è¯¥æ˜¯ï¼š</strong>
            <ul>
                <li>æ‰«æç¬¬ä¸€ä¸ªæ ‡è®° â†’ æ˜¾ç¤ºç¬¬ä¸€ä¸ªåŠ¨ç”»</li>
                <li>æ‰«æç¬¬äºŒä¸ªæ ‡è®° â†’ åˆ‡æ¢åˆ°ç¬¬äºŒä¸ªåŠ¨ç”»</li>
                <li>æ‰«æç¬¬ä¸‰ä¸ªæ ‡è®° â†’ åˆ‡æ¢åˆ°ç¬¬ä¸‰ä¸ªåŠ¨ç”»</li>
                <li>é‡å¤æ‰«æåŒä¸€æ ‡è®° â†’ ä¿æŒå½“å‰åŠ¨ç”»</li>
                <li>ç§»å¼€æ‰€æœ‰æ ‡è®° â†’ åŠ¨ç”»ç»§ç»­æ’­æ”¾</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>è°ƒè¯•ä¿¡æ¯</h2>
        <p>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼š</p>
        <ul>
            <li>æ ‡è®°å‘ç°/ä¸¢å¤±äº‹ä»¶</li>
            <li>åŠ¨ç”»åŠ è½½çŠ¶æ€</li>
            <li>åˆ‡æ¢è¿‡ç¨‹æ—¥å¿—</li>
            <li>é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰</li>
        </ul>
        
        <button onclick="openConsole()">æ‰“å¼€æ§åˆ¶å°è¯´æ˜</button>
    </div>

    <script>
        function openConsole() {
            alert('æ‰“å¼€æ§åˆ¶å°çš„æ–¹æ³•ï¼š\n\nChrome/Edge: F12 æˆ– Ctrl+Shift+I\nSafari: Cmd+Option+I\nFirefox: F12 æˆ– Ctrl+Shift+K\n\næŸ¥çœ‹ Console æ ‡ç­¾é¡µçš„æ—¥å¿—ä¿¡æ¯ã€‚');
        }

        // æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
        fetch('http://localhost:8000')
            .then(response => {
                if (response.ok) {
                    console.log('âœ… æœåŠ¡å™¨è¿è¡Œæ­£å¸¸');
                    document.body.innerHTML += '<div class="status success" style="margin-top: 20px;"><strong>âœ… æœåŠ¡å™¨çŠ¶æ€ï¼š</strong>è¿è¡Œæ­£å¸¸ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•</div>';
                }
            })
            .catch(error => {
                console.log('âŒ æœåŠ¡å™¨æœªè¿è¡Œ');
                document.body.innerHTML += '<div class="status warning" style="margin-top: 20px;"><strong>âŒ æœåŠ¡å™¨çŠ¶æ€ï¼š</strong>æœªè¿è¡Œï¼Œè¯·å…ˆå¯åŠ¨æœåŠ¡å™¨</div>';
            });
    </script>
</body>
</html> 